#
# Define basic display information
#
name     : Generate Heatmap from Abundance Data

tooltip  : |
    Generate a heatmap-dendrogram from abundance data.

screenshots :
    - heatmap_from_abundance_profile_input.png
    - heatmap_from_abundance_profile_output.png

icon: icon.png

#
# Define the set of other narrative methods that should be suggested to the user.
#
suggestions :
    apps:
        related :
            []
        next :
            []
    methods:
        related :
            []
        next :
            []

#
# Configure the display and description of the parameters
#
parameters :
    input_profile :
        ui-name : |
            Abundance Profile or Matrix
        short-hint : |
            Select a profile or matrix generated from the Generate Taxonomic Abundance Data or Generate Functional Abundance Data methods</a>
        long-hint  : |
            Select a profile or matrix generated from the Generate Taxonomic Abundance Data or Generate Functional Abundance Data methods</a>


    output_heatmap :
        ui-name : |
            Output Heatmap
        short-hint : |
            Generates an image file of a heatmap-dendrogram
        long-hint  : |
            Generates an image file of a heatmap-dendrogram


    distance :
        ui-name : |
            Distance
        short-hint : |
            Distance/dissimilarity metric: bray-curtis, euclidean, maximum, manhattan, canberra, minkowski, difference
        long-hint  : |
            Distance/dissimilarity metric: bray-curtis, euclidean, maximum, manhattan, canberra, minkowski, difference


    cluster :
        ui-name : |
            Cluster
        short-hint : |
            Select method: ward, single, complete, mcquitty, median, centroid
        long-hint  : |
            Select method: ward, single, complete, mcquitty, median, centroid


    name :
        ui-name : |
            Label by Name
        short-hint : |
            Label rows by ID or metagenome name
        long-hint  : |
            Label rows by ID or metagenome name

description : |
    <p>This method allows users to generate and explore hierarchical clustering of taxonomic or functional annotations to identify correlations between profiles (samples) and their environmental parameters. With this method, users can build a heatmap-dendrogram from taxonomic or functional matrices with raw or normalized values generated by the <a data-method-id=Òretrieve_taxonomic_abundance_profileÓ>Generate Taxonomic Abundance Data</a> or <a data-method-id=Òretrieve_functional_abundance_profileÓ>Generate Functional Abundance Data</a> methods for either amplicon or WGS sequence data. Users can also tailor the output of the heatmap to include labels.</p>
    
    <p>Several clustering and distance metric options are offered. This provides flexibility for users as there really is no definitive answer as to which distance/dissimilarity metrics and clustering methods are best suited for application to annotation abundance data; therefore, the user can  select from various distance/dissimilarity metrics and clustering methods.  Distance metric options include:</p>
    
    <p>
    <ul>
    <li>bray-curtis (non-Euclidean: well established ecological dissimilarity metric, most suitable for use with raw abundance data)</li>
    <li>manhattan (non-Euclidean: a.k.a. city block distance, the sum of absolute differences between A & B)</li>
    <li>euclidean (classic geometric distance metric, suitable for most data that have undergone normalization)</li>
    <li>maximum (maximum distance between A & B)</li>
    <li>canberra (similar to manhattan - values undergo additional scaling)</li>
    <li>minkowski (Euclidean: generalization of both the Euclidean distance and the Manhattan distance)</li>
    </ul>
    </p>
    
    <p>Cluster methods include:</p>
    
    <p>
    <ul>
    <li>ward (UPGMA- Unweighted Pair Group Method with Arithmetic Mean): distance between two clusters is the sum of squared deviations from points to centroids. Sensitive to outliers.)</li>
    <li>single (UPGMA: distance between two clusters is the minimum distance between an observation in one cluster and an observation in the other cluster.)</li>
    <li>complete (UPGMA: distance between two clusters is the maximum distance between an observation in one cluster and an observation in the other cluster. Sensitive to outliers.)</li>
    <li>mcquitty (WPGMA- Weighted Pair Group Method with Arithmetic Mean): when two clusters are be joined, the distance of the new cluster to any other cluster is calculated as the average of the distances of the soon to be joined clusters to that other cluster.)</li>
    <li>median (WPGMC - Weighted Pair-Group Method using Centroids: distance between two clusters is the median distance between an observation in one cluster and an observation in the other cluster. Reduces the effect of outliers.)</li>
    <li>centroid (UPGMC - Unweighted Pair-Group Method using Centroids: distance between two clusters is the distance between the cluster centroids or means.)</li>
    </ul>
    </p>
    
    <p><strong>Team members who developed & deployed algorithm in KBase:</strong> Kevin Keegan, Jared Bischof, Travis Harrison, Folker Meyer, Tobias Paczian, and Andreas Wilke. For questions, <a href="mailto:help@kbase.us">e-mail help@kbase.us</a></p>
