#
# Define basic display information
#
name     : Cluster Expression Data - K-Means

tooltip  : |
    Perform k-means clustering to group expression data for observing and analyzing patterns of gene expression.

screenshots :
    []

icon: kb_expr-yellow.png

#
# Define the set of other narrative methods that should be suggested to the user.
#
method-suggestions :
    related :
        []
    next :
        []


#
# Configure the display and description of the parameters
#
parameters :
    input_expression_matrix:
        ui-name : |
            Expression Matrix
        short-hint : |
            Select the Expression Matrix to use for k-means clustering
        long-hint  : |
            Choose an Expression Matrix from your Data Panel to use with this method. You can upload an Expression Matrix into your Narrative by clicking the <i>Add Data</i> button and selecting the <i>Import</i> tab.
            
    input_k_value:
        ui-name : |
            Number of Clusters (<i>k</i>)
        short-hint : |
            Value of <i>k</i> - number of clusters
        long-hint  : |
            To calculate a suggested optimal of <i>k</i>, run the <a data-method-id=Òexpression_toolkit_estimate_k_newÓ>Estimate K for K-Means Clustering Data method on your Expression Matrix before running this method.

    output_cluster_set :
        ui-name : |
            Output Set of Clusters 
        short-hint : |
            Provide name for the set of clusters generated by algorithm
        long-hint  : |
            After the method has finished running, an ClusterSet data object will be added to your data panel. Provide a name for this data object, using only alphanumeric characters and underscores.
            
    n_start :
        ui-name : Number of Starts
        short-hint : Number of initial configurations for k-means algorithm
        long-hint  : Number of initial configurations for k-means algorithm

    max_iter :
        ui-name : Maximum Number of Iterations
        short-hint : Maximum number of iterations to run k-means algorithm
        long-hint  : The number of iterations determines how many times the k-means algorithm is run on the dataset until convergence is achieved.

    algorithm :
        ui-name : K-means algorithm
        short-hint : Select the k-means algorithm for the analysis
        long-hint  : See method detail page for more information about the different k-means algorithms.

    random_seed :
        ui-name : Random Seed
        short-hint : Seed value used by K-means algorithm
        long-hint  : If left empty, a random seed value is generated to be used by K-means algorithm. Setting the seed explicitly to a specific value is required to generate the same results every time.


description : |
    <p>This method enables users to observe and analyze patterns of gene expression by grouping expression data via k-means clustering. K-means clustering is useful for discovering functionally related sets of genes, investigating regulatory networks for gene expression, and deducing unknown gene functions by observing and grouping their expression patterns in differing conditions.</p>

    <p>Begin by selecting or importing both the expression dataset to analyze and the genome associated with the expression dataset using the Add Data button. Specify a value for k. You can use the Estimate K for K-Means Clustering method to assist in determining an optimal value for k. Provide a name for the output set of clusters. Define the number of starts and iterations, select the k-means clustering algorithm to use for the analysis, and input a random seed value.</p>
    
    <p>The input is a .tsv file with "gene-id" listed in the A1 cell, the gene ids listed in the A column, the sample/conditions identifiers in the 1 row, and expression values that correspond to the gene-ids and sample throughout. For a comprehensive guide to formatting your expression data for import into KBase, see the <a href="http://kbase.us/data-upload-download-guide/expression-matrix/">Data Upload/Download Guide</a>.</p>    
    
    <p>Description of k-means clustering algorithms:
        <ul>
        <li>Hartigan-Wong (default): Efficient clustering algorithm; fast initial convergence; optimizes within-cluster sum of squares</li>
        <li>Lloyd: For large data sets; discrete data distribution; optimizes total sum of squares</li>
        <li>Forgy: For large data sets; continuous data distribution; optimizes total sum of squares</li>
        <li>MacQueen: Fast initial convergence; optimizes total sum of squares</li></ul></p>
        
    <p>This method is based on the <a href="http://www.inside-r.org/packages/cran/amap/docs/Kmeans">amap package for R</a>.</p>
        
    <p><strong>Team members who developed & deployed algorithm in KBase:</strong>
    Paramvir Dehal, Roman Sutormin, Michael Sneddon, Srividya Ramakrishnan, Pavel Novichkov, Keith Keller.</p>
    
    <p>For questions, <a href="mailto:help@kbase.us">e-mail help@kbase.us</a></p>
