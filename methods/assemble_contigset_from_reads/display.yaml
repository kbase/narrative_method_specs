#
# Define basic display information
#
name     : Assemble Contigset from Reads
    
tooltip  : |
    Assemble a set of short DNA reads into a set of genome contigs.

screenshots :
    - assemble_contigs_from_reads_input1.png
    - assemble_contigs_from_reads_input2.png

#
# Define the set of other narrative methods that should be suggested to the user.
#
method-suggestions :
    related :
        []
    next :
        []


#
# Configure the display and description of the parameters
#
parameters :
    assembly_input :
        ui-name : |
            AssemblyInput
        short-hint : |
            A dataset of genomic reads generated from a sequencing platform (e.g., Illumina, PacBio).  The dataset can specify sets of paired-end and/or single-end reads.
        long-hint  : |
            A dataset of genomic reads generated from a sequencing platform (e.g., Illumina, PacBio).  The dataset can specify sets of paired-end and/or single-end reads.
        placeholder : |
            select an AssemblyInput object

    read_library :
        ui-name : |
            Read Library
        short-hint : |
            See Technical Description in Manual Page
        long-hint  : |
            See Technical Description in Manual Page

    description :
        ui-name : |
            Description
        short-hint : |
            brief description of the assembly
        long-hint  : |
            brief description of the assembly

    output_contigset :
        ui-name : |
            Output ContigSet
        short-hint : |
            A set of assembled contiguous sequences (contigs)
        long-hint  : |
            A set of assembled contiguous sequences (contigs)

    recipe :
        ui-name : |
            Assembly Recipe
        short-hint : |
            See Technical Description in Manual Page
        long-hint  : |
            See Technical Description in Manual Page

    assembler :
        ui-name : |
            Assembler
        short-hint : |
            See Technical Description in Manual Page
        long-hint  : |
            See Technical Description in Manual Page

    pipeline :
        ui-name : |
            Assembly Pipeline
        short-hint : |
            See Technical Description in Manual Page
        long-hint  : |
            See Technical Description in Manual Page

description : |
    <p>This method can be used to perform an automatic genome assembly using the latest computational tools. Single or multiple assemblers can be invoked to compare results.  Resulting assemblies are automatically processed via a collection of analysis tools developed by both KBase and the research community. The assembly method attempts to select the "best" assembly to suggest to the user.</p>

<p>Several assembly workflows or "recipes" are available. These workflows have been tuned and tested to fit certain dataset types or desired analysis criteria such as throughput or rigor. The compute engine’s flexible nature also enables the rapid design and emulation of other popular protocols.</p>

<p>Additionally, custom workflows can be designed and executed in "pipeline" mode without having to compose complicated scripts. Workflows can be composed with combinations of quality filtering or trimming, error correction, adapter removal, assembly, scaffolding, or post-processing.</p>

technical-description : |
    

<h4>Description of Changeable Parameters </h4>
<p>1. AssemblyInput: A set of reads to be assembled into contigs. An AssemblyInput object can consist of multiple sets of paired or single-ended read libraries.</p>
<p> 2. A short description of the assembly job to be run.</p>
<p> 3. The name of the contig set to be generated by the assembly service.</p>
<p> 4. Assembly Recipe: Users are able to assemble contigs using several &quot;recipes&quot; or curated workflows that can provide intelligent pipelines, automatic parameter selection, or multi-assembler comparisons. Available recipes are described below. The &nbsp;&quot;automatic assembly&quot; recipe provides a nice balance between &quot;fast pipeline&quot; and &quot;smart pipeline.&quot;</p>
<blockquote>
  <p>  automatic assembly</p>
  <ul>
    <li>Runs BayesHammer on reads</li>
    <li>Assembles with Velvet, IDBA and SPAdes</li>
    <li>Sorts assemblies by ALE score</li>
  </ul>
  <p>    fast pipeline</p>
  <ul>
    <li>Assembles with A6, Velvet and SPAdes (with BayesHammer for error correction).</li>
    <li>Results are sorted by ARAST quality score.
    </li>
  </ul>
  <p>smart pipeline</p>
  <ul>
    <li>Runs BayesHammer on reads, KmerGenie to choose hash-length for Velvet</li>
    <li>Assembles with Velvet, IDBA and SPAdes</li>
    <li>Sorts assemblies by ALE score</li>
    <li>Merges the two best assemblies with GAM-NGS
    </li>
  </ul>
  <p>kiki assembler<br />
    Runs kiki assembler<br />
    <br />
    spades pipeline<br />
    Runs BayesHammer preprocessing with SPAdes assembler
  </p>
</blockquote>
<p>5. Advanced Options</p>
<p>Read library<br />
If necessary users can upload and use their own read library here.</p>
<p>&quot;Assembler&quot; mode: one or multiple assemblers listed below can be chosen as the preferred tool(s), and result assessments and comparisons are generated.<br />
  <br />
&quot;Assembly pipeline&quot; mode (beta) allows the user to rapidly build a customized pipeline combination using the set of available preprocessing, assembly, and postprocessing tools described below:</p>
<blockquote>
  <p>  <strong>sspace</strong>: SSPACE pre-assembled contig scaffolder<br />
    <strong>trim_sort</strong>: DynamicTrim and LengthSort from SolexaQA<br />
    <strong>filter_by_length</strong>: Length-based sequencing reads filter and trimmer based on seqtk<br />
    <strong>KmerGenie</strong>: Informed and automated k-mer size selection for genome assembly<br />
    <strong>bwa</strong>: BWA aligner that maps reads to contigs<br />
    <strong>velvet</strong>: Velvet de-bruijn graph based assembler<br />
    <strong>masurca</strong>: MaSuRCA assembler based on a hybrid graph &amp; overlap based algorithms<br />
    <strong>sga_preprocess</strong>: SGA component for preprocessing reads (runs subcommand 'preprocess')<br />
    <strong>bhammer</strong>: SPAdes component for quality control of sequence data<br />
    <strong>idba</strong>: IDBA iterative graph-based assembler for single-cell and standard data<br />
    <strong>prodigal</strong>: Prodigal microbial gene predictor<br />
    <strong>fastqc</strong>: FastQC quality control tool for sequence data<br />
    <strong>ray</strong>: Ray graph-based parallel microbial and metagenomic assembler<br />
    <strong>swap</strong>: SWAP Assembler<br />
    <strong>gam_ngs</strong>: GAM-NGS genomic assemblies merger<br />
    <strong>ale</strong>: ALE likelihood-based estimator of assembly quality<br />
    <strong>kiki</strong>: Kiki overlap-based parallel microbial and metagenomic assembler<br />
    <strong>a5</strong>: A5 microbial assembly pipeline<br />
    <strong>tagdust</strong>: TagDust sequencing artifacts remover<br />
    <strong>sga_ec</strong>: SGA component for error correction (runs subcommands: 'index' &amp; 'correct')<br />
    <strong>spades</strong>: SPAdes single-cell and standard assembler based on paired de Bruijn graphs<br />
    <strong>pacbio</strong>: PacBio non-hybrid assembly pipeline for SMRT long reads<br />
    <strong>reapr</strong>: REAPR assembly error recognizer using paired-end reads<br />
    <strong>a6</strong>: Modified A5 microbial assembly pipeline<br />
    <strong>quast</strong>: QUAST assembly quality assessment tool (run by default)<br />
    <strong>bowtie2</strong>: Bowtie2 aligner that maps reads to contigs<br />
    <strong>discovar</strong>: Discovar assembly pipeline for illumina 250+ bp reads</p>
</blockquote>
<br />
<h4>Description of fixed parameters </h4>
<p>The following are the default parameters set for each respective module when run in a recipe or pipeline:</p>
<p> <strong>filter_by_length</strong><br />
  min: 250<br />
  end: 200<br />
  sync: True</p>
<p> <strong>idba</strong><br />
  max_k: 50<br />
  scaffold: True</p>
<p> <strong>kiki</strong><br />
  k: 27<br />
  contig_threshold: 800</p>
<p> <strong>masurca</strong><br />
  graph_k-mer_size: auto<br />
  use_linking_mates: auto<br />
  limit_jump_coverage: 60<br />
  ca_parameters: ovlMerSize=30 cgwErrorRate=0.25 ovlMemory=4GB<br />
  k-mer_count_threshold: 1<br />
  num_threads: auto<br />
  jf_size: 2000000000<br />
  do_homopolymer_trim: 0</p>
<p> <strong>ray</strong><br />
  k: 31</p>
<p> <strong>sga_preprocess</strong><br />
  quality_trim: 10<br />
  quality_filter: 20<br />
  min_length: 29<br />
  permute_ambiguous: True</p>
<p> <strong>spades</strong><br />
  only_assembler: True (bool)<br />
  mismatch_correction: True (bool)<br />
  read_length: short (short, medium, medium2, long)</p>
<p><strong>sspace</strong><br />
  extend: False<br />
  minimum_overlap: 15<br />
  a: 0.4<br />
  m: -1<br />
  n: -1<br />
  k: -1<br />
  x: 0</p>
<p><strong>trim_sort</strong><br />
  probcutoff: 0.05<br />
  length: 25</p>
<p><strong>velvet</strong><br />
  hash_length: 29<br />
  auto_insert: False</p>

        
publications :
   
    -
        display-text: |   
SSPACE:
Boetzer M, Henkel CV, Jansen HJ, Butler D, Pirovano W (2011) Scaffolding pre-assembled contigs using SSPACE. Bioinformatics 27: 578–579. doi:10.1093/bioinformatics/btq683.

    -
        display-text: |
trim_sort:
Cox MP, Peterson DA, Biggs PJ (2010) SolexaQA: At-a-glance quality assessment of Illumina second-generation sequencing data. BMC Bioinformatics 11: 485. doi:10.1186/1471-2105-11-485.

    -
        display-text: |
filter_by_length:
link: https://github.com/levinas/seqtk

    -
        display-text: |
KmerGenie:
Chikhi R, Medvedev P (2014) Informed and automated k-mer size selection for genome assembly. Bioinformatics 30: 31–37. doi:10.1093/bioinformatics/btt310.

    -
        display-text: |
bwa:
Li H, Durbin R (2009) Fast and accurate short read alignment with Burrows-Wheeler transform. Bioinformatics 25: 1754–1760. doi:10.1093/bioinformatics/btp324.

    -
        display-text: |
Velvet:
Zerbino DR, Birney E (2008) Velvet: Algorithms for de novo short read assembly using de Bruijn graphs. Genome Research 18: 821–829. doi:10.1101/gr.074492.107.

    -
        display-text: |
MaSuRCA:
Zimin AV, Marcais G, Puiu D, Roberts M, Salzberg SL, et al. (2013) The MaSuRCA genome assembler. Bioinformatics 29: 2669–2677. doi:10.1093/bioinformatics/btt476.

    -
        display-text: |
sga_preprocess:
Simpson JT, Durbin R (2012) Efficient de novo assembly of large genomes using compressed data structures. Genome Research 22: 549–556. doi:10.1101/gr.126953.111.

    -
        display-text: |
bhammer:
Bankevich A, Nurk S, Antipov D, Gurevich AA, Dvorkin M, et al. (2012) SPAdes: A New Genome Assembly Algorithm and Its Applications to Single-Cell Sequencing. Journal of Computational Biology 19: 455–477. doi:10.1089/cmb.2012.0021.

    -
        display-text: |
IDBA:
Peng Y, Leung HCM, Yiu SM, Chin FYL (2012) IDBA-UD: a de novo assembler for single-cell and metagenomic sequencing data with highly uneven depth. Bioinformatics 28: 1420–1428. doi:10.1093/bioinformatics/bts174.

    -
        display-text: |
Prodigal:
Hyatt D, Chen G-L, LoCascio PF, Land ML, Larimer FW, et al. (2010) Prodigal: prokaryotic gene recognition and translation initiation site identification. BMC Bioinformatics 11: 119. doi:10.1186/1471-2105-11-119.

    -
        display-text: |
fastqc:
link: http://www.bioinformatics.babraham.ac.uk/projects/fastqc

    -
        display-text: |
Ray:
Boisvert S, Raymond F, Godzaridis É, Laviolette F, Corbeil J (2012) Ray Meta: scalable de novo metagenome assembly and profiling. Genome Biology 13: R122. doi:10.1186/gb-2012-13-12-r122.

    -
        display-text: |
swap:
link: http://sourceforge.net/projects/swapassembler

    -
        display-text: |
GAM-NGS:
Vicedomini R, Vezzi F, Scalabrin S, Arvestad L, Policriti A (2013) GAM-NGS: genomic assemblies merger for next generation sequencing. BMC Bioinformatics 14: S6. doi:10.1186/1471-2105-14-S7-S6.

    -
        display-text: |
ALE:
Clark SC, Egan R, Frazier PI, Wang Z (2013) ALE: a generic assembly likelihood evaluation framework for assessing the accuracy of genome and metagenome assemblies. Bioinformatics 29: 435–443. doi:10.1093/bioinformatics/bts723.

    -
        display-text: |
kiki:
link: https://github.com/GeneAssembly/kiki

    -
        display-text: |
a5:
Tritt A, Eisen JA, Facciotti MT, Darling AE (2012) An Integrated Pipeline for de Novo Assembly of Microbial Genomes. PLoS ONE 7: e42304. doi:10.1371/journal.pone.0042304.

    -
        display-text: |
TagDust:
Lassmann T, Hayashizaki Y, Daub CO (2009) TagDust--a program to eliminate artifacts from next generation sequencing data. Bioinformatics 25: 2839–2840. doi:10.1093/bioinformatics/btp527.

    -
        display-text: |
sga_ec:
Li H, Durbin R (2009) Fast and accurate short read alignment with Burrows-Wheeler transform. Bioinformatics 25: 1754–1760. doi:10.1093/bioinformatics/btp324.

    -
        display-text: |
spades:
Bankevich A, Nurk S, Antipov D, Gurevich AA, Dvorkin M, et al. (2012) SPAdes: A New Genome Assembly Algorithm and Its Applications to Single-Cell Sequencing. Journal of Computational Biology 19: 455–477. doi:10.1089/cmb.2012.0021.

    -
        display-text: |
pacbio:
Chin C-S, Alexander DH, Marks P, Klammer AA, Drake J, et al. (2013) Nonhybrid, finished microbial genome assemblies from long-read SMRT sequencing data. Nature Methods 10: 563–569. doi:10.1038/nmeth.2474.

    -
        display-text: |
REAPR:
Hunt M, Kikuchi T, Sanders M, Newbold C, Berriman M, et al. (2013) REAPR: a universal tool for genome assembly evaluation. Genome Biology 14: R47. doi:10.1186/gb-2013-14-5-r47.

    -
        display-text: |
a6:
link: https://github.com/levinas/a5

    -
        display-text: |
QUAST:
Gurevich A, Saveliev V, Vyahhi N, Tesler G (2013) QUAST: quality assessment tool for genome assemblies. Bioinformatics 29: 1072–1075. doi:10.1093/bioinformatics/btt086.

    -
        display-text: |
Bowtie 2:
Langmead B, Salzberg SL (2012) Fast gapped-read alignment with Bowtie 2. Nature Methods 9: 357–359. doi:10.1038/nmeth.1923.

    -
        display-text: |
discovar: 
link: http://www.broadinstitute.org/software/discovar/blog

